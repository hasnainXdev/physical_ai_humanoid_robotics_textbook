"use strict";(globalThis.webpackChunkphysical_ai_book=globalThis.webpackChunkphysical_ai_book||[]).push([[5362],{2352:(e,n,s)=>{s.d(n,{A:()=>j});var t=s(6540),r=s(7489),o=s(2181),i=s(6342),c=s(5293);let a=null;async function l(){return a||(a=async function(){return(await s.e(2279).then(s.bind(s,2279))).default}()),a}const d="docusaurus-mermaid-container";function h(){const{colorMode:e}=(0,c.G)(),n=(0,i.p)().mermaid,s=n.theme[e],{options:r}=n;return(0,t.useMemo)(()=>({startOnLoad:!1,...r,theme:s}),[s,r])}function u({text:e,config:n}){const[s,r]=(0,t.useState)(null),o=(0,t.useState)(`mermaid-svg-${Math.round(1e7*Math.random())}`)[0],i=h(),c=n??i;return(0,t.useEffect)(()=>{(async function({id:e,text:n,config:s}){const t=await l();t.initialize(s);try{return await t.render(e,n)}catch(r){throw document.querySelector(`#d${e}`)?.remove(),r}})({id:o,text:e,config:c}).then(r).catch(e=>{r(()=>{throw e})})},[o,e,c]),s}const p={container:"container_lyt7"};var x=s(4848);function m({renderResult:e}){const n=(0,t.useRef)(null);return(0,t.useEffect)(()=>{const s=n.current;e.bindFunctions?.(s)},[e]),(0,x.jsx)("div",{ref:n,className:`${d} ${p.container}`,dangerouslySetInnerHTML:{__html:e.svg}})}function g({value:e}){const n=u({text:e});return null===n?null:(0,x.jsx)(m,{renderResult:n})}function j(e){return(0,x.jsx)(r.A,{fallback:e=>(0,x.jsx)(o.MN,{...e}),children:(0,x.jsx)(g,{...e})})}},5073:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>c,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"module1-ros2/concepts","title":"ROS 2 Concepts","description":"To understand how a ROS 2-based robot operates, you must first grasp its fundamental building blocks. These concepts define how different parts of the software communicate and work together. The primary concepts are Nodes, Topics, Messages, Services, and Actions.","source":"@site/docs/module1-ros2/02-concepts.mdx","sourceDirName":"module1-ros2","slug":"/module1-ros2/concepts","permalink":"/physical_ai_humanoid_robotics_textbook/docs/module1-ros2/concepts","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module1-ros2/02-concepts.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"ROS 2 Concepts","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Introduction to ROS 2","permalink":"/physical_ai_humanoid_robotics_textbook/docs/module1-ros2/introduction"},"next":{"title":"Pub/Sub with rclpy","permalink":"/physical_ai_humanoid_robotics_textbook/docs/module1-ros2/pub-sub-rclpy"}}');var r=s(4848),o=s(8453),i=s(2352);const c={title:"ROS 2 Concepts",sidebar_position:2},a="1.2 Core ROS 2 Concepts",l={},d=[{value:"The ROS 2 Graph",id:"the-ros-2-graph",level:2},{value:"1. Nodes: The Building Blocks",id:"1-nodes-the-building-blocks",level:2},{value:"2. Communication Types",id:"2-communication-types",level:2},{value:"Topics: The Continuous Data Stream",id:"topics-the-continuous-data-stream",level:3},{value:"Services: The Remote Procedure Call (RPC)",id:"services-the-remote-procedure-call-rpc",level:3},{value:"Actions: The Long-Running Task Manager",id:"actions-the-long-running-task-manager",level:3},{value:"Summary of Communication Types",id:"summary-of-communication-types",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"12-core-ros-2-concepts",children:"1.2 Core ROS 2 Concepts"})}),"\n",(0,r.jsx)(n.p,{children:"To understand how a ROS 2-based robot operates, you must first grasp its fundamental building blocks. These concepts define how different parts of the software communicate and work together. The primary concepts are Nodes, Topics, Messages, Services, and Actions."}),"\n",(0,r.jsx)(n.h2,{id:"the-ros-2-graph",children:"The ROS 2 Graph"}),"\n",(0,r.jsxs)(n.p,{children:["The entire network of ROS 2 components is called the ",(0,r.jsx)(n.strong,{children:"ROS 2 Graph"}),". It's a conceptual map of all the nodes and the communication pathways between them."]}),"\n",(0,r.jsx)(i.A,{chart:"\ngraph TD\n  subgraph ROS 2 Graph\n      A[Node 1: /camera_driver] -- Publishes --\x3e B((Topic: /image_raw));\n      B -- Message: Image --\x3e C[Node 2: /image_processor];\n      C -- Publishes --\x3e D((Topic: /detected_objects));\n      D -- Message: Detections --\x3e E[Node 3: /object_tracker];\n      F[Node 4: /user_interface] -- Service Call --\x3e G{Service: /get_robot_status};\n      H[Node 5: /robot_state] -- Service Response --\x3e F;\n      I[Node 6: /mission_planner] -- Action Goal --\x3e J[(Action: /navigate_to_pose)];\n      K[Node 7: /navigation_server] -- Action Feedback/Result --\x3e I;\n  end\n  style B fill:#87CEEB\n  style D fill:#87CEEB\n  style G fill:#90EE90\n  style J fill:#FFA07A\n"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"1-nodes-the-building-blocks",children:"1. Nodes: The Building Blocks"}),"\n",(0,r.jsxs)(n.p,{children:["A ",(0,r.jsx)(n.strong,{children:"Node"})," is the smallest unit of executable code in ROS 2. Each node should be responsible for a single, specific purpose."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Example"}),": A node to control the camera, a node to process images, a node to plan paths, a node for motor control."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Breaking a system into modular nodes offers several advantages:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Fault Tolerance"}),": If one node crashes, the rest of the system can continue to run."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Reusability"}),": A well-designed node (e.g., a camera driver) can be reused across many different robots."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Clarity"}),": It's easier to understand and debug a system made of small, single-purpose components."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Language Independence"}),": One node can be written in Python, another in C++, and they can communicate seamlessly."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"A single executable can contain one or more nodes. In a complex system like a humanoid robot, you might have dozens of nodes running concurrently."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"2-communication-types",children:"2. Communication Types"}),"\n",(0,r.jsx)(n.p,{children:"Nodes communicate with each other using three primary mechanisms: Topics, Services, and Actions. Choosing the right mechanism is key to building an efficient and reliable system."}),"\n",(0,r.jsx)(n.h3,{id:"topics-the-continuous-data-stream",children:"Topics: The Continuous Data Stream"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Analogy"}),": A radio broadcast or a public announcement channel."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Pattern"}),": Publisher-Subscriber (Pub/Sub)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use Case"}),": For continuous, one-way streams of data where it doesn't matter if a message is missed occasionally."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["One or more nodes ",(0,r.jsx)(n.strong,{children:"publish"})," (broadcast) data to a named channel called a ",(0,r.jsx)(n.strong,{children:"Topic"}),". Any number of other nodes can ",(0,r.jsx)(n.strong,{children:"subscribe"})," to that topic to receive the data. The publisher doesn't know or care who is listening."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Message"}),": The data itself, structured in a predefined format."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Examples"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["A camera node continuously publishing ",(0,r.jsx)(n.code,{children:"/image_raw"})," with ",(0,r.jsx)(n.code,{children:"sensor_msgs/Image"})," messages."]}),"\n",(0,r.jsxs)(n.li,{children:["An IMU node continuously publishing ",(0,r.jsx)(n.code,{children:"/imu/data"})," with ",(0,r.jsx)(n.code,{children:"sensor_msgs/Imu"})," messages."]}),"\n",(0,r.jsxs)(n.li,{children:["A motor control node publishing the current joint states to ",(0,r.jsx)(n.code,{children:"/joint_states"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.A,{chart:"\ngraph TD\n  A[Publisher Node] -- Publishes Message --\x3e B((Topic));\n  B -- Message --\x3e C[Subscriber Node 1];\n  B -- Message --\x3e D[Subscriber Node 2];\n  B -- Message --\x3e E[...];\n"}),"\n",(0,r.jsx)(n.h3,{id:"services-the-remote-procedure-call-rpc",children:"Services: The Remote Procedure Call (RPC)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Analogy"}),": A function call or a question-and-answer exchange."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Pattern"}),": Client-Server."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use Case"}),": For synchronous, request/response interactions where you need a direct confirmation that an operation was completed."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["A ",(0,r.jsx)(n.strong,{children:"Client"})," node sends a ",(0,r.jsx)(n.code,{children:"Request"})," to a ",(0,r.jsx)(n.strong,{children:"Server"})," node and waits for a ",(0,r.jsx)(n.code,{children:"Response"}),". The connection is one-to-one and blocks until the response is received (or a timeout occurs)."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Examples"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["A node calling a ",(0,r.jsx)(n.code,{children:"/get_robot_status"})," service and receiving back the battery level and temperature."]}),"\n",(0,r.jsxs)(n.li,{children:["A node requesting to ",(0,r.jsx)(n.code,{children:"/spawn_object"})," in a simulation and getting a success/failure boolean in return."]}),"\n",(0,r.jsxs)(n.li,{children:["A service ",(0,r.jsx)(n.code,{children:"/set_led_color"})," that changes an LED and confirms the change."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.A,{chart:"\nsequenceDiagram\n  participant Client\n  participant Server\n  Client->>Server: Request\n  activate Server\n  Server--\x3e>Client: Response\n  deactivate Server\n"}),"\n",(0,r.jsx)(n.h3,{id:"actions-the-long-running-task-manager",children:"Actions: The Long-Running Task Manager"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Analogy"}),': Ordering a pizza. You place an order (goal), get updates (feedback, e.g., "baking," "out for delivery"), and finally get the result (the pizza). You can also cancel the order.']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Pattern"}),": Client-Server with feedback and preemption."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use Case"}),": For long-running, asynchronous tasks that may take a significant amount of time to complete and for which you need progress updates and the ability to cancel."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["An ",(0,r.jsx)(n.strong,{children:"Action Client"})," sends a ",(0,r.jsx)(n.code,{children:"Goal"})," to an ",(0,r.jsx)(n.strong,{children:"Action Server"}),". The server acknowledges the goal and starts executing the task. While executing, it provides periodic ",(0,r.jsx)(n.code,{children:"Feedback"}),". When the task is finished, it sends a final ",(0,r.jsx)(n.code,{children:"Result"}),". The client can request to ",(0,r.jsx)(n.code,{children:"cancel"})," the goal at any point."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Examples"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Sending a ",(0,r.jsx)(n.code,{children:"/navigate_to_pose"})," goal to the navigation system. Feedback could be the robot's current distance from the goal. The result would be success or failure."]}),"\n",(0,r.jsxs)(n.li,{children:["An action ",(0,r.jsx)(n.code,{children:"/pick_object"}),' for a manipulator arm. Feedback might include "moving to pre-grasp," "grasping," "lifting."']}),"\n",(0,r.jsxs)(n.li,{children:["An action ",(0,r.jsx)(n.code,{children:"/rotate_degrees"})," to turn the robot's base by a specific amount."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.A,{chart:"\nsequenceDiagram\n  participant Client\n  participant Server\n  Client->>Server: Send Goal\n  Server--\x3e>Client: Acknowledge\n  loop Feedback Loop\n      Server--\x3e>Client: Feedback (e.g., current progress)\n  end\n  Server--\x3e>Client: Result (when complete)\n"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"summary-of-communication-types",children:"Summary of Communication Types"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Pattern"}),(0,r.jsx)(n.th,{children:"Use For"}),(0,r.jsx)(n.th,{children:"Key Features"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Topic"})}),(0,r.jsx)(n.td,{children:"Publisher/Subscriber"}),(0,r.jsx)(n.td,{children:"Continuous data streams (e.g., sensor data, robot state)"}),(0,r.jsx)(n.td,{children:'Many-to-many, asynchronous, "fire and forget"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Service"})}),(0,r.jsx)(n.td,{children:"Client/Server"}),(0,r.jsx)(n.td,{children:"Quick, transactional requests (e.g., get/set parameters)"}),(0,r.jsx)(n.td,{children:"One-to-one, synchronous (blocking), request/response"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Action"})}),(0,r.jsx)(n.td,{children:"Client/Server"}),(0,r.jsx)(n.td,{children:"Long-running, preemptible tasks (e.g., navigation, manipulation)"}),(0,r.jsx)(n.td,{children:"One-to-one, asynchronous, provides feedback, cancelable"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"Understanding these core concepts is the first and most crucial step in mastering ROS 2. In the following sections, we'll see how to put them into practice."})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>c});var t=s(6540);const r={},o=t.createContext(r);function i(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);