"use strict";(globalThis.webpackChunkphysical_ai_book=globalThis.webpackChunkphysical_ai_book||[]).push([[1850],{2352:(e,n,o)=>{o.d(n,{A:()=>x});var i=o(6540),t=o(7489),s=o(2181),a=o(6342),l=o(5293);let r=null;async function d(){return r||(r=async function(){return(await o.e(2279).then(o.bind(o,2279))).default}()),r}const c="docusaurus-mermaid-container";function u(){const{colorMode:e}=(0,l.G)(),n=(0,a.p)().mermaid,o=n.theme[e],{options:t}=n;return(0,i.useMemo)(()=>({startOnLoad:!1,...t,theme:o}),[o,t])}function h({text:e,config:n}){const[o,t]=(0,i.useState)(null),s=(0,i.useState)(`mermaid-svg-${Math.round(1e7*Math.random())}`)[0],a=u(),l=n??a;return(0,i.useEffect)(()=>{(async function({id:e,text:n,config:o}){const i=await d();i.initialize(o);try{return await i.render(e,n)}catch(t){throw document.querySelector(`#d${e}`)?.remove(),t}})({id:s,text:e,config:l}).then(t).catch(e=>{t(()=>{throw e})})},[s,e,l]),o}const m={container:"container_lyt7"};var p=o(4848);function g({renderResult:e}){const n=(0,i.useRef)(null);return(0,i.useEffect)(()=>{const o=n.current;e.bindFunctions?.(o)},[e]),(0,p.jsx)("div",{ref:n,className:`${c} ${m.container}`,dangerouslySetInnerHTML:{__html:e.svg}})}function b({value:e}){const n=h({text:e});return null===n?null:(0,p.jsx)(g,{renderResult:n})}function x(e){return(0,p.jsx)(t.A,{fallback:e=>(0,p.jsx)(s.MN,{...e}),children:(0,p.jsx)(b,{...e})})}},3210:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"module2-digital-twins/02-gazebo-simulation","title":"Humanoid Simulation in Gazebo","description":"1. Introduction to Gazebo","source":"@site/docs/module2-digital-twins/02-gazebo-simulation.mdx","sourceDirName":"module2-digital-twins","slug":"/module2-digital-twins/02-gazebo-simulation","permalink":"/docs/module2-digital-twins/02-gazebo-simulation","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module2-digital-twins/02-gazebo-simulation.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"02-gazebo-simulation","title":"Humanoid Simulation in Gazebo","sidebar_label":"Gazebo Simulation"},"sidebar":"tutorialSidebar","previous":{"title":"Introduction","permalink":"/docs/module2-digital-twins/01-introduction"},"next":{"title":"Physics Concepts","permalink":"/docs/module2-digital-twins/03-physics-concepts"}}');var t=o(4848),s=o(8453),a=(o(3457),o(2352));const l={id:"02-gazebo-simulation",title:"Humanoid Simulation in Gazebo",sidebar_label:"Gazebo Simulation"},r=void 0,d={},c=[{value:"1. Introduction to Gazebo",id:"1-introduction-to-gazebo",level:2},{value:"Key Features of Gazebo for Humanoid Simulation",id:"key-features-of-gazebo-for-humanoid-simulation",level:3},{value:"Gazebo Physics Interaction Loop",id:"gazebo-physics-interaction-loop",level:3},{value:"2. Setting Up a Gazebo Simulation",id:"2-setting-up-a-gazebo-simulation",level:2},{value:"Step 1: Create a World File",id:"step-1-create-a-world-file",level:3},{value:"Step 2: Create a Robot Model",id:"step-2-create-a-robot-model",level:3},{value:"Step 3: Launching the Simulation",id:"step-3-launching-the-simulation",level:3},{value:"3. Interacting with the Simulation",id:"3-interacting-with-the-simulation",level:2},{value:"Gazebo GUI",id:"gazebo-gui",level:3},{value:"Gazebo Plugins",id:"gazebo-plugins",level:3},{value:"4. Gazebo and ROS 2 Integration",id:"4-gazebo-and-ros-2-integration",level:2},{value:"Conclusion",id:"conclusion",level:2}];function u(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"1-introduction-to-gazebo",children:"1. Introduction to Gazebo"}),"\n",(0,t.jsx)(n.p,{children:"Gazebo is a powerful 3D robotics simulator that is widely used in the robotics community. It is a mature and feature-rich simulator that is tightly integrated with ROS. Gazebo allows you to simulate your robot in a realistic environment, with accurate physics, sensors, and actuators."}),"\n",(0,t.jsx)(n.p,{children:"In this chapter, we will learn how to create a simple Gazebo simulation for a humanoid robot."}),"\n",(0,t.jsx)(n.h3,{id:"key-features-of-gazebo-for-humanoid-simulation",children:"Key Features of Gazebo for Humanoid Simulation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Physics Engine"}),": Gazebo uses the Open Dynamics Engine (ODE) to simulate the physics of the robot and its environment. This includes gravity, friction, and collisions."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Sensor Models"}),": Gazebo provides a wide range of sensor models, including cameras, LiDAR, IMUs, and force-torque sensors."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"ROS Integration"}),": Gazebo is tightly integrated with ROS, allowing you to control your robot and read sensor data from your ROS 2 nodes."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"World Files"}),": Gazebo uses SDF (Simulation Description Format) files to describe the robot and its environment."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"gazebo-physics-interaction-loop",children:"Gazebo Physics Interaction Loop"}),"\n",(0,t.jsx)(a.A,{chart:"\ngraph TD\n  A[World Update Event] --\x3e B{Physics Engine (ODE)};\n  B -- Updates --\x3e C[Model States (Pose, Velocity)];\n  C --\x3e D{Sensor Plugins};\n  D -- Generate Data --\x3e E[ROS 2 Topics];\n  C --\x3e F{Control Plugins};\n  F -- Apply Forces/Torques --\x3e B;\n  G[ROS 2 Commands] --\x3e F;\n"}),"\n",(0,t.jsx)(n.h2,{id:"2-setting-up-a-gazebo-simulation",children:"2. Setting Up a Gazebo Simulation"}),"\n",(0,t.jsx)(n.p,{children:'To create a Gazebo simulation, you need to create a "world" file that defines the environment and the robot.'}),"\n",(0,t.jsx)(n.h3,{id:"step-1-create-a-world-file",children:"Step 1: Create a World File"}),"\n",(0,t.jsxs)(n.p,{children:["Create a new file named ",(0,t.jsx)(n.code,{children:"my_humanoid_world.sdf"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" ?>\n<sdf version="1.6">\n  <world name="default">\n    \x3c!-- A global light source --\x3e\n    <include>\n      <uri>model://sun</uri>\n    </include>\n    \x3c!-- A ground plane --\x3e\n    <include>\n      <uri>model://ground_plane</uri>\n    </include>\n    \x3c!-- Your humanoid robot --\x3e\n    <include>\n      <uri>model://my_humanoid</uri>\n      <name>my_humanoid</name>\n      <pose>0 0 1.0 0 0 0</pose>\n    </include>\n  </world>\n</sdf>\n'})}),"\n",(0,t.jsx)(n.p,{children:"This world file includes a sun, a ground plane, and our humanoid robot. The robot is loaded from a model file, which we will create next."}),"\n",(0,t.jsx)(n.h3,{id:"step-2-create-a-robot-model",children:"Step 2: Create a Robot Model"}),"\n",(0,t.jsxs)(n.p,{children:["Create a new directory named ",(0,t.jsx)(n.code,{children:"my_humanoid"})," and a file named ",(0,t.jsx)(n.code,{children:"model.sdf"})," inside it:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" ?>\n<sdf version="1.6">\n  <model name="my_humanoid">\n    <link name="torso">\n      <inertial>\n        <mass>10</mass>\n        <inertia>\n          <ixx>1.0</ixx>\n          <ixy>0.0</ixy>\n          <ixz>0.0</ixz>\n          <iyy>1.0</iyy>\n          <iyz>0.0</iyz>\n          <izz>1.0</izz>\n        </inertia>\n      </inertial>\n      <visual name="visual">\n        <geometry>\n          <box>\n            <size>0.4 0.6 0.2</size>\n          </box>\n        </geometry>\n      </visual>\n      <collision name="collision">\n        <geometry>\n          <box>\n            <size>0.4 0.6 0.2</size>\n          </box>\n        </geometry>\n      </collision>\n    </link>\n  </model>\n</sdf>\n'})}),"\n",(0,t.jsx)(n.p,{children:"This is a simple model of a humanoid torso. A complete humanoid model would have many more links and joints."}),"\n",(0,t.jsx)(n.h3,{id:"step-3-launching-the-simulation",children:"Step 3: Launching the Simulation"}),"\n",(0,t.jsxs)(n.p,{children:["You can launch the simulation using the ",(0,t.jsx)(n.code,{children:"gazebo"})," command:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"gazebo my_humanoid_world.sdf\n"})}),"\n",(0,t.jsx)(n.p,{children:"This will open the Gazebo GUI and you should see your humanoid robot standing on the ground plane."}),"\n",(0,t.jsx)(n.h2,{id:"3-interacting-with-the-simulation",children:"3. Interacting with the Simulation"}),"\n",(0,t.jsx)(n.p,{children:"Gazebo provides several ways to interact with the simulation."}),"\n",(0,t.jsx)(n.h3,{id:"gazebo-gui",children:"Gazebo GUI"}),"\n",(0,t.jsx)(n.p,{children:"The Gazebo GUI allows you to:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Manipulate the view"}),": Pan, rotate, and zoom the camera."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Apply forces"}),": Apply forces and torques to the robot to test its stability."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Inspect models"}),": View the properties of the robot and its links."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Add models"}),": Add new models to the simulation from the Gazebo model database."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"gazebo-plugins",children:"Gazebo Plugins"}),"\n",(0,t.jsx)(n.p,{children:"Gazebo plugins are a powerful way to extend the functionality of Gazebo. You can use plugins to:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Control the robot"}),": Create a plugin that subscribes to ROS 2 topics and controls the robot's joints."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Simulate sensors"}),": Create a plugin that simulates a custom sensor."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Add custom logic"}),": Create a plugin that adds custom logic to the simulation."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Here's an example of a simple plugin that applies a force to the robot:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-cpp",children:'#include <gazebo/gazebo.hh>\n#include <gazebo/physics/physics.hh>\n\nnamespace gazebo\n{\n  class MyPlugin : public WorldPlugin\n  {\n    public: void Load(physics::WorldPtr _world, sdf::ElementPtr _sdf)\n    {\n      this->world = _world;\n      this->updateConnection = event::Events::ConnectWorldUpdateBegin(\n          std::bind(&MyPlugin::OnUpdate, this));\n    }\n\n    public: void OnUpdate()\n    {\n      this->world->ModelByName("my_humanoid")->GetLink("torso")->SetLinearVel(ignition::math::Vector3d(0.1, 0, 0));\n    }\n\n    private: physics::WorldPtr world;\n    private: event::ConnectionPtr updateConnection;\n  };\n\n  GZ_REGISTER_WORLD_PLUGIN(MyPlugin)\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"4-gazebo-and-ros-2-integration",children:"4. Gazebo and ROS 2 Integration"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"gazebo_ros"})," package provides a set of plugins that allow you to integrate Gazebo with ROS 2. These plugins allow you to:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Control the robot"}),": Control the robot's joints using ROS 2 topics."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Read sensor data"}),": Read sensor data from Gazebo and publish it to ROS 2 topics."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Spawn models"}),": Spawn and delete models in the simulation using ROS 2 services."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["To use the ",(0,t.jsx)(n.code,{children:"gazebo_ros"})," plugins, you need to add them to your robot's SDF file."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<plugin name="gazebo_ros2_control" filename="libgazebo_ros2_control.so">\n  <robot_param>robot_description</robot_param>\n  <robot_param_node>robot_state_publisher</robot_param_node>\n  <parameters>$(find my_robot_config)/config/my_controllers.yaml</parameters>\n</plugin>\n'})}),"\n",(0,t.jsxs)(n.p,{children:["This plugin loads the ",(0,t.jsx)(n.code,{children:"ros2_control"})," framework, which allows you to control the robot's joints using a standard set of controllers."]}),"\n",(0,t.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,t.jsx)(n.p,{children:"Gazebo is a powerful and flexible simulator that is an essential tool for robotics development. It allows you to create realistic simulations of your robot and its environment, and to test your robot's software in a safe and controlled manner. In the next chapter, we will dive deeper into the physics concepts that are essential for creating accurate and realistic simulations."})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}}}]);